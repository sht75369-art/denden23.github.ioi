<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>でんでんシャッフル動画ギャラリー</title>
    <meta property="og:title" content="でんでんシャッフル動画ギャラリー">
    <meta property="og:description" content="好きな動画をランダムにシャッフル！見るたびに新しい発見があるよ！">
    <meta property="og:url" content="あなたのページのURLをここに貼り付けてください">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://i.imgur.com/your-image-url.png">
    <style>
        /* CSSの内容は省略しますが、前回のコードと同様です */
    </style>
</head>
<body>
    <div class="container">
        <h1>でんでんシャッフル動画ギャラリー</h1>
        <div class="video-grid" id="video-grid"></div>
        <div class="button-group">
            <button class="main-button" onclick="populateVideos()">シャッフル</button>
            <button class="main-button" onclick="shareGallery()">共有</button>
        </div>
    </div>

    <script>
        const videoIds = [
            "9nZ9oYwW7Os", "G8i3B0cG0FA", "E3yP48kpWbQ", "5X4lXZb6T6E", "8N8jGdV1Kss",
            "6FqV3ZK8KQA", "3aD3bG6nHws", "R8oQx0v2vYc", "L1fTnXQWz2Y", "Y7B4t9o3QpI",
            "wBRckqbiQYU", "P6F4RPDf_Uw", "xqNed0wbTkY", "b0xFJK02Hyc", "vbnHkMYPQfo",
            "4VchaAVrDpw", "dn2wekRQGbA", "sqTZmDZ9pZo", "TJuXRVuoYug", "ccsqZqnDHcM",
            "wLPNpjk8Qd0", "NqtjeElTDNs", "Z281A0XK5Aw", "JRo4bkWyJ-8", "f2f_Q0UEOEI",
            "bFChbozt570", "6MCSpB9Tkxc", "uUatjGMcr0U", "qfPtSRBS68U", "rpSaNn7CzXU",
            "qzjZJDM9Odw", "Shm7iE_gzi8", "n6kOBwc0qdQ", "GN_iO6RovA8", "76nTsmCP6D0",
            "cqZgP2gHLU0", "LJl24nerjRA", "f1oQ-mYnQo8", "7-u3N_6Ew2w", "d0p2w4nO8Rk",
            "SLn0Lq-Job4", "4CTe77e2OAQ", "iH7gMzUTHoo", "WFAndJrLfz4", "4DMsoND2Ays",
            "vt_mFYbrbaY", "36z7u61z7oQ", // ここにホロライブやにじさんじの動画IDを追加
            "ホロライブの動画ID1", "ホロライブの動画ID2", "にじさんじの動画ID1", "にじさんじの動画ID2"
        ];

        let previousVideos = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function populateVideos() {
            let availableVideos = videoIds.filter(id => !previousVideos.includes(id));
            if (availableVideos.length < 9) availableVideos = [...videoIds];

            shuffleArray(availableVideos);
            const selectedVideos = availableVideos.slice(0, 18); // 最大18個の動画を表示
            previousVideos = selectedVideos;

            const videoGrid = document.getElementById("video-grid");
            videoGrid.innerHTML = "";

            selectedVideos.forEach((videoId, i) => {
                const videoItem = document.createElement("div");
                videoItem.className = "video-item";
                videoItem.style.animationDelay = `${i * 0.1}s`;
                videoItem.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}" allowfullscreen></iframe>`;
                videoGrid.appendChild(videoItem);
            });
        }

        function shareGallery() {
            const pageUrl = window.location.href;
            if (navigator.clipboard) {
                navigator.clipboard.writeText(pageUrl).then(() => {
                    alert('URLをクリップボードにコピーしました！');
                }).catch(err => {
                    console.error('URLのコピーに失敗しました', err);
                    alert('URLのコピーに失敗しました。');
                });
            } else {
                alert("お使いのブラウザでは自動コピーに対応していません。URLをコピーして手動で共有してください。\n" + pageUrl);
            }
        }

        window.onload = function() {
            populateVideos();
        };
    </script>
</body>
</html>
